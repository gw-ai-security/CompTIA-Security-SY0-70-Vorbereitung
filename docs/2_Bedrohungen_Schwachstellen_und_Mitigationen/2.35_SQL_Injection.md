# SQL-Injection-Angriffe

**Datum:** 26. Oktober 2023  
**Betreff:** Übersicht über SQL-Injection-Angriffe (SQLi)  
**Quelle:** Auszüge aus *„SQL Injection – CompTIA Security+ SY0-701 – 2.3“*

---

## 1. Einleitung: Was ist ein Code-Injection-Angriff?

Ein **Code-Injection-Angriff** ist eine häufige Form der Anwendungsschwachstelle. Dabei fügt ein Angreifer **eigenen Code** in ein Eingabefeld ein, das von der Anwendung an ein Backend-System (z. B. eine Datenbank) weitergeleitet wird.

> „Ein Code-Injection-Angriff erlaubt es dem Angreifer, eigenen Code in Informationen einzuschleusen, die in die Anwendung eingegeben werden.“

### Beispiele für Code-Injection-Typen:
- HTML-Injection
- XML-Injection
- **SQL-Injection (SQLi)** – im Fokus dieses Dokuments

Entwickler sind dafür verantwortlich, solche Angriffe zu verhindern, z. B. durch **Input-Validierung und sichere Abfragekonstruktion**.

---

## 2. SQL-Injection (SQLi) im Detail

### 2.1 Definition und Funktionsweise

**SQL (Structured Query Language)** ist die Standardsprache zur Kommunikation mit relationalen Datenbanken.  
SQL-Injection ermöglicht es Angreifern, **manipulierte SQL-Befehle in die Abfragen einzuschleusen**, die von einer Webanwendung an die Datenbank gesendet werden.

> „Wenn eine Anwendung nicht über entsprechende Prüfungen verfügt, kann ein Angreifer beliebige SQL-Befehle an die Datenbank senden.“

---

### 2.2 Einfache Ausnutzung

SQLi ist besonders gefährlich, weil sie häufig **leicht durchführbar** ist:

- Kein spezielles Tool notwendig – **ein Webbrowser genügt**
- Der Angriff erfolgt über **normale Eingabefelder**
- Es ist **keine Benutzerinteraktion (z. B. Klick)** erforderlich
- Der Code wird einfach in die Eingabemaske eingefügt

---

### 2.3 Beispiel einer SQL-Injection

Angenommen, die Webanwendung verwendet folgende SQL-Abfrage:

```sql
SELECT * FROM users WHERE name = 'Professor'
```

Ein Angreifer injiziert stattdessen:

```sql
Professor' OR 1=1 --
```

Dadurch wird die Abfrage zu:

```sql
SELECT * FROM users WHERE name = 'Professor' OR 1=1 --
```

Da die Bedingung `1=1` immer wahr ist, gibt die Datenbank **alle Benutzer** zurück – nicht nur den Benutzer „Professor“.

> „Wenn Code an eine Datenbank gesendet wird, der prüft, ob 1 gleich 1 ist, handelt es sich sehr wahrscheinlich um eine SQL-Injection.“

---

### 2.4 Auswirkungen einer SQL-Injection

SQLi kann gravierende Folgen haben:

- **Lesen** sensibler Daten (z. B. Passwörter, Finanzdaten)
- **Ändern oder Löschen** von Daten
- **Absturz oder Lahmlegung** der Datenbank
- **Eskalation von Berechtigungen** (z. B. Zugriff auf Admin-Daten)

> „Sie haben effektiv die vollständige Kontrolle über die Datenbank.“

---

## 3. Praktisches Beispiel mit WebGoat

**WebGoat** ist eine absichtlich verwundbare Trainingsanwendung (verfügbar unter [webgoat.org](https://webgoat.org)), die SQLi demonstriert.

### Normaler Ablauf

- Der Benutzer gibt einen **Mitarbeiternamen** (z. B. `Smith`) und eine **Transaktionsautorisierungsnummer (TAN)** (z. B. `3SL99A`) ein.
- Die Anwendung gibt daraufhin die Abteilungsinformationen von „Smith“ zurück, **sofern die TAN korrekt ist**.

### Angriff durch SQL-Injection

Anstatt nur eine gültige TAN einzugeben, ergänzt der Angreifer das Eingabefeld mit:

```sql
3SL99A' OR '1'='1
```

Die SQL-Abfrage lautet dann effektiv:

```sql
SELECT * FROM departments WHERE tan = '3SL99A' OR '1'='1'
```

Da `'1'='1'` immer wahr ist, gibt die Anwendung **alle Einträge** aus – unabhängig von Benutzername oder TAN.

> „Nach dem Klick auf ‚Get Department‘ haben wir effektiven Zugriff auf alle Daten.“

---

## Fazit

**SQL-Injection** zählt zu den gefährlichsten und gleichzeitig **am weitesten verbreiteten** Anwendungsschwachstellen.  
Ein unsicheres Eingabefeld ohne Input-Validierung reicht oft aus, um vollständigen Datenbankzugriff zu erlangen.

### Präventionsmaßnahmen:

- **Input-Validierung** und Whitelisting
- Verwendung von **Prepared Statements / Parameterized Queries**
- **Minimalrechte** für Datenbanknutzer
- Logging und Monitoring verdächtiger Abfragen

**Hinweis:** SQLi ist fester Bestandteil der OWASP Top 10 – und ein Pflichtthema in jeder Sicherheitsprüfung.
